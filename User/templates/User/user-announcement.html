{% extends 'Home/index.html' %}
{% load static %}

{% block title %}
    <title>General Announcements</title>
{% endblock title %}

{% block stylesheets %}
    <link rel="stylesheet" href="{% static 'Home/announcement.css' %}">
{% endblock %}

{% block announcements-active %}active{% endblock %}

{% block main-content %}
    <article class="panel announcement general-information">
        <h2>General Information</h2>
        {% for announcement in general_announcements %}
        <article style="--order: {{ forloop.counter }}">
            <a class="heading" href="{% if user.user_type == 'Student' %}{% url 'student-general-announcement-page' user.student.id announcement.id %}
                                          {% elif user.user_type == 'Lecturer' %}{% url 'lecturer-general-announcement-page' user.lecturer.id announcement.id %}
                                          {% elif not user.is_authenticated %}{% url 'guest-announcement-viewpage' announcement.id %}
                                          {% endif %}"><h3>{{ announcement.title }}</h3>
            </a>
            <footer>
                <time>{{ announcement.time_created.date }}<br>{{ announcement.time_created.time | time:"g:iA" }}</time>
            </footer>
        </article>
        {% endfor %}
        <footer>
            <a class="view-all-btn" href="{% if user.user_type == 'Student' %}{% url 'student-general-announcement-all' user.student.id %}
                                          {% elif user.user_type == 'Lecturer' %}{% url 'lecturer-general-announcement-all' user.lecturer.id %}
                                          {% elif not user.is_authenticated %}{% url 'guest-announcement-all' %}
                                          {% endif %}">View All</a>
        </footer>
    </article>

    {% if user.is_authenticated %}
    <article class="panel announcement courses-announcements">
        <h2>Class Announcements</h2>
        {% for announcement in class_announcements %}
            {% if announcement.is_displayable or user.user_type == 'Lecturer' and not announcement.is_displayable %}
                <article style="--order: {{ forloop.counter }}">
                    <div class="heading">
                        <a href="{% if user.user_type == 'Student' %}{% url 'student-class-announcement-page' user.student.id announcement.class_id.id %}
                                              {% elif user.user_type == 'Lecturer' %}{% url 'lecturer-class-announcement-page' user.lecturer.id announcement.class_id.id %}
                                              {% elif not user.is_authenticated %}{% url 'guest-announcement-page' %}
                                              {% endif %}"><p>{{ announcement.class_id }}</p></a>
                        <a class="heading" href="{% if user.user_type == 'Student' %}{% url 'student-class-announcement-viewpage' user.student.id announcement.class_id.id announcement.id %}
                                                  {% elif user.user_type == 'Lecturer' %}{% url 'lecturer-class-announcement-viewpage' user.lecturer.id announcement.class_id.id announcement.id %}
                                                  {% elif not user.is_authenticated %}{% url 'guest-announcement-page' %}
                                                  {% endif %}"><h3>{{ announcement.title }}</h3></a>
                    </div>
                    <footer>
                        <time>{{ announcement.time_created.date }}<br>{{ announcement.time_created.time | time:"g:iA" }}</time>
                    </footer>
                </article>
            {% else %}
            {% endif %}
        {% endfor %}
       <footer>
            <a class="view-all-btn" href="{% if user.user_type == 'Student' %}{% url 'student-class-announcement-all' user.student.id %}
                                          {% elif user.user_type == 'Lecturer' %}{% url 'lecturer-class-announcement-all' user.lecturer.id %}
                                          {% elif not user.is_authenticated %}{% url 'guest-announcement-page' %}
                                          {% endif %}">View All</a>
        </footer>
    </article>
    {% endif %}

{% endblock %}
